# 项目规划

> 一切设计实现以此文档为主

## 项目目标

- [ ] 支持 Markdown
- [ ] 文章支持标签
- [ ] 文章支持分类
- [ ] 文章支持历史记录
- [ ] 文章支持草稿
- [ ] 文章支持多级评论
- [ ] 文章支持备份与还原

## 项目设计

- 所有文章、配置等信息均以文件形式存储
- 使用 `git` 作版本管理
- 已删除文件仍可通过历史记录恢复
- 发生文件操作则触发`git`提交
- 文件写操作互斥

## 组件设计

### 文章

`文章`为项目的核心，大部分组件依赖于此。一篇文章对应一个目录，目录**只能为**字母、数字、中划线和下划线组合，目录下存放文章内容信息，其中 `.article.conf`文件存放文章的配置信息；`assets`
目录存放文章所依赖的资源文件；`README.{type}`文件存放文档（变量`type` 代表受支持的文档类型）, 一盘文章只能存在一个文档文件，且文档依赖的本地资源 **必须且只能** 存放在 `assets`
目录中。一个标准的目录结构如下所示：

```text
/example
 |- .article.conf
 |- README.md
 |- /assets
     |- example-image.png
     |- example-music.wav
     |- screen.otp
```

### 草稿

`草稿` 作为[文章](#文章)的扩充，旨在为文章提供临时保存功能。草稿文件保存在文章文档的同级目录中，文件名为 `README.next.{type}`，其中，变量`type`
代表受支持的文档类型；草稿文件依赖的资源文件同样保存在 `assets` 目录下；

### 分类

`分类` 作为[文章](#文章)的扩充，旨在为文章提供分类功能。
一个分类可包含多篇文章；一篇文章仅属于一个分类；一个分类可包含在另一个分类下。每个分类都对应一个目录，目录名称只能为字母、数字、中划线和下划线组合，目录下存放有分类的配置、子[分类](#分类)和直属[文章](#文章)
。`.group.conf` 文件存放分类的配置信息，`README.{type}` 文件存放分类的标题、介绍。注意！，此文档不应过长或依赖于外部资源文件。一个标准的目录结构如下所示：

```text
/example
 |- .group.conf
 |- README.md
 |- /child-group
     |- .group.conf
     |- README.md
 |- /article
     |- .article.conf
     |- README.md
```

### 标签

`标签` 作为[文章](#文章)的扩充，旨在为文章提供标签功能。一个标签可包含多篇文章，一篇文章可包含多个标签。标签以文件的形式存放在[文章](#文章) 目录下 `tags` 文件夹中，名称无任何限制；并且，如果[分类](#分类)
目录存在 `tags` 目录,则分类下的所有`子分类`、`文章`都会继承`标签`。一个标准的目录结构如下所示：

```text
|- /article
    |- .article.conf 
    |- README.md
    |- /tags
        |- java
        |- kotlin
        |- markdown
```

### 评论

`评论` 作为[文章](#文章)的扩充，旨在为文章提供评论功能。评论以文件的形式存放在[文章](#文章) 目录下的 `comments.json` 中，如果文件不存在则表示不允许评论。
